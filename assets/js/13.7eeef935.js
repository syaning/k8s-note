(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{408:function(n,s,t){"use strict";t.r(s);var a=t(42),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configmap"}},[n._v("#")]),n._v(" ConfigMap")]),n._v(" "),t("p",[n._v("通过 ConfigMap 可以为 Ingress Nginx 做全局配置。在启动的时候，会通过 "),t("code",[n._v("--configmap")]),n._v(" 指定所用的 ConfigMap，通过如下方式可以查看：")]),n._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[n._v("$ kubectl describe deploy -n ingress nginx-nginx-ingress-controller\n\nName:                   nginx-nginx-ingress-controller\nNamespace:              ingress\nPod Template:\n  Containers:\n   nginx-ingress-controller:\n    Image:       quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.1\n    Ports:       "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v("/TCP, "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("443")]),n._v("/TCP\n    Host Ports:  "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("0")]),n._v("/TCP, "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("0")]),n._v("/TCP\n    Args:\n      /nginx-ingress-controller\n      --default-backend-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("ingress/nginx-nginx-ingress-default-backend\n      --election-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("ingress-controller-leader\n      --ingress-class"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("nginx\n      --configmap"),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v("ingress/nginx-nginx-ingress-controller\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(".\n")])])]),t("p",[n._v("因此可以配置如下 ConfigMap:")]),n._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" ingress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("ingress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("-")]),n._v("controller\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" ingress\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("map-hash-bucket-size")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v('"128"')]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[n._v("ssl-protocols")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(":")]),n._v(" SSLv2\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[n._v("WARNING")]),n._v(" "),t("p",[n._v("需要特别注意的是，ConfigMap 中 key 和 value 都是字符串，因此对于数字、"),t("code",[n._v("true")]),n._v("、"),t("code",[n._v("false")]),n._v("，都需要用引号引起来。")])]),n._v(" "),t("p",[n._v("完整的配置列表可以参考 "),t("a",{attrs:{href:"https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/",target:"_blank",rel:"noopener noreferrer"}},[n._v("ConfigMaps"),t("OutboundLink")],1),n._v(".")])])}),[],!1,null,null,null);s.default=e.exports}}]);